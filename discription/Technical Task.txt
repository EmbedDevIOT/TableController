Порядок работы (OPEN):

1. Нажатие кнопки (1 Click)
2. Задержка 1-2 сек (настраивается в программе)
3. 3 актуатора выдвигаются, опускают юбку. (актуаторы без обратной связи, вероятно переходить на следующий шаг по времени)
4. Nema 23 включается. Перемещается от концевика 1 до концевика 2. двигает столешницы.
5. Nema 23 от концевика 2 продвигается еще на чуть-чуть вперед (5 оборотов).
6. Актуатор №4 выдвигается. Поднимает звезду. (актуаторы без обратной связи, вероятно переходить на следующий шаг по времени)
7. Nema 23 двигается назад до концевика 2

Порядок работы (CLOSE):

1. Нажатие кнопки (1 Click)
2. Задержка 1-2 сек (настраивается в программе)
3. Nema 23 от концевика 2 продвигается еще на чуть-чуть вперед (5 оборотов).
4. Актуатор №4 задвигается. Опуская звезду.
5. Nema 23 двигается назад до концевика 2
6. Nema 23 включается. Перемещается от концевика 2 до концевика 1. двигает столешницы.
7. 3 актуатора задвигаются, поднимая юбку. (актуаторы без обратной связи, вероятно переходить на следующий шаг по времени)

Порядок работе (IDLE)
Удержание кнопки (> 5s)
Возврат в домашнюю позицию, в случае если нет сигнала от датчика.
1.Три актуатора задвигаются. 
2. NEMA 23 двигается назад на двойное расстояние "чуть-чуть" (8 оборотов). 
3а. Если появляется сигнал от второго датчика - останавливается, далее продвигается вперёд на "чуть-чуть" (5 оборотов). 
Актуатор 4 втягивается. NEMA едет до датчика 1.
 Три актуатора поднимаются.  
3б. Если сигнал от датчиков не появился -  актуатор 4 втягивается.
 NEMA двигается до датчика 1.
 Три актуатора поднимаются.

3В. если появился сигнал от датчика 1 - три актуатора поднимаются. Актуатор 4 втягивается.

Вращение по часовой стрелке

      stepper.setRunMode(FOLLOW_POS);
      stepper.setMaxSpeed(-3000);
      stepper.setAcceleration(3000);
      // stepper.setSpeedDeg(-800);
      // stepper.enable();
      stepper.setTargetDeg(360*5, RELATIVE);
      uint32_t now;
      now = millis();
      // Moved slightfly to forward (item 5)
      while (millis() - now < 10000)
      {
        stepper.tick();
      }
      SetStateDrive(disable);